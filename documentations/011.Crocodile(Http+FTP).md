# Overview
**Box:** Crocodile  
**OS:** Linux  
**Difficulty:** Very Easy  
**Focus:** FTP Misconfiguration / Web Authentication Bypass  

The Crocodile machine demonstrates the security risks associated with exposed services and poor credential management. An unauthenticated attacker can leverage anonymous FTP access to obtain sensitive credential files and reuse those credentials to bypass authentication on a web application, ultimately gaining unauthorized access and retrieving the flag.

---

# Background Study
File Transfer Protocol (FTP) is a standard network protocol used for transferring files between a client and a server. When improperly configured, FTP services may allow anonymous authentication, enabling unauthorized users to browse and download files from the server. If sensitive data such as usernames or passwords is stored within these directories, this can lead to credential disclosure.

---

# Attack Approach
- **Starting access level:** Unauthenticated external attacker  
- **Expected attack surfaces:** FTP service (port 21), HTTP web application (port 80)  

As an unauthenticated attacker, initial reconnaissance focused on identifying exposed network services. The presence of both an FTP service and a web application suggested the possibility of information disclosure followed by credential reuse across services.

---

# Key Findings
- FTP service exposed on TCP port 21 with anonymous login enabled  
- HTTP service exposed on TCP port 80 hosting a PHP-based web application  
- FTP server contained readable files with usernames and passwords  
- Web application included a hidden login page not linked from the main page  
- Credentials obtained from FTP were valid for web authentication  

---

# Exploitation

## Vulnerability Type
FTP Misconfiguration and Credential Reuse  

## Root Cause
The FTP service was configured to allow anonymous access, exposing files containing sensitive credential information. Additionally, the same credentials were reused by the web applicationâ€™s authentication mechanism, allowing attackers to authenticate without proper authorization boundaries between services.

## Attack Execution
Initial port scanning identified open FTP (21) and HTTP (80) services. Anonymous FTP access allowed retrieval of files containing usernames and passwords. Directory brute-forcing on the web server revealed a hidden `login.php` page. Credentials obtained via FTP were successfully reused to authenticate to the web application and access protected content.

## Access Gained
Unauthorized authenticated access to the web application using valid credentials obtained from the FTP service, resulting in disclosure of the flag.

---

# Mitigation / Defense
This issue could have been mitigated by disabling anonymous FTP access or restricting it to non-sensitive directories. Sensitive credential files should never be stored in publicly accessible locations. Additionally, credentials should not be reused across services, and web authentication mechanisms should enforce proper access controls and monitoring. Defense-in-depth strategies and regular configuration audits are essential to prevent such misconfigurations.

---

# Lessons Learned
- Anonymous FTP access can lead to severe information disclosure  
- Credential reuse across services significantly increases attack impact  
- Multiple low-severity misconfigurations can combine into full compromise  
- Directory brute-forcing is effective for discovering hidden web resources  
- Proper service configuration and credential hygiene are critical for security  
